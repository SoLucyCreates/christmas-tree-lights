"use strict";var j=Object.defineProperty;var Z=(x,t,z)=>t in x?j(x,t,{enumerable:!0,configurable:!0,writable:!0,value:z}):x[t]=z;var l=(x,t,z)=>(Z(x,typeof t!="symbol"?t+"":t,z),z);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});let T=class s{constructor(t,z,y){this.x=t,this.y=z,this.z=y}static fromObject(t){return new s(t.x,t.y,t.z)}static fromTuple(t){return new s(t[0],t[1],t[2])}static zero(){return new s(0,0,0)}static forward(){return new s(0,0,1)}static backward(){return new s(0,0,-1)}static up(){return new s(0,1,0)}static down(){return new s(0,-1,0)}static left(){return new s(-1,0,0)}static right(){return new s(1,0,0)}static randomOnSphere(t){const z=Math.random(),y=Math.random(),e=2*Math.PI*z,n=Math.acos(2*y-1),r=t*Math.sin(n)*Math.cos(e),i=t*Math.sin(n)*Math.sin(e),h=t*Math.cos(n);return new s(r,i,h)}static randomInSphere(t){const z=Math.random(),y=Math.random(),e=2*Math.PI*z,n=Math.acos(2*y-1),r=t*Math.cbrt(Math.random()),i=r*Math.sin(n)*Math.cos(e),h=r*Math.sin(n)*Math.sin(e),c=r*Math.cos(n);return new s(i,h,c)}clone(){return new s(this.x,this.y,this.z)}add(t){return new s(this.x+t.x,this.y+t.y,this.z+t.z)}sub(t){return new s(this.x-t.x,this.y-t.y,this.z-t.z)}mult(t){return new s(this.x*t.x,this.y*t.y,this.z*t.z)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){const z=this.y*t.z-this.z*t.y,y=this.z*t.x-this.x*t.z,e=this.x*t.y-this.y*t.x;return new s(z,y,e)}scale(t){return new s(this.x*t,this.y*t,this.z*t)}limitLength(t=1){return this.length<=t?this.clone():this.asLength(t)}asLength(t){return this.normalized.scale(t)}distanceTo(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)}get squaredMagnitude(){return this.x**2+this.y**2+this.z**2}get length(){return Math.hypot(this.x,this.y,this.z)}get normalized(){const t=this.length;return new s(this.x/t,this.y/t,this.z/t)}get asTuple(){return[this.x,this.y,this.z]}get asObject(){return{x:this.x,y:this.y,z:this.z}}negate(){return new s(-this.x,-this.y,-this.z)}rotateXYZ(t){const{x:z,y,z:e}=t,n=Math.cos(z),r=Math.sin(z),i=Math.cos(y),h=Math.sin(y),c=Math.cos(e),a=Math.sin(e),d=this.x*(i*c)+this.y*(n*a+r*h*c)+this.z*(r*a-n*h*c),u=this.x*(-i*a)+this.y*(n*c-r*h*a)+this.z*(r*c+n*h*a),$=this.x*h+this.y*(-r*i)+this.z*(n*i);return new s(d,u,$)}rotateXY(t){const z=Math.cos(t),y=Math.sin(t),e=this.x*z-this.y*y,n=this.x*y+this.y*z;return new s(e,n,this.z)}rotateYZ(t){const z=Math.cos(t),y=Math.sin(t),e=this.y*z-this.z*y,n=this.y*y+this.z*z;return new s(this.x,e,n)}rotateZX(t){const z=Math.cos(t),y=Math.sin(t),e=this.z*z-this.x*y,n=this.z*y+this.x*z;return new s(n,this.y,e)}rotateAroundAxis(t,z){const y=Math.cos(z),e=Math.sin(z),n=this.dot(t),r=t.y*this.z-t.z*this.y,i=t.z*this.x-t.x*this.z,h=t.x*this.y-t.y*this.x,c=this.x*y+r*e+n*(1-y)*t.x,a=this.y*y+i*e+n*(1-y)*t.y,d=this.z*y+h*e+n*(1-y)*t.z;return new s(c,a,d)}angleBetween(t){const z=this.dot(t),y=this.length*t.length;return Math.acos(z/y)}projectOnto(t){const z=this.dot(t),y=t.squaredMagnitude;if(y===0)throw new Error("Cannot project onto a zero-length vector.");const e=z/y;return t.scale(e)}midpoint(t){return new s((this.x+t.x)/2,(this.y+t.y)/2,(this.z+t.z)/2)}};function f(x,t,z){return Math.max(t,Math.min(z,x))}let o=class M{constructor(t,z,y){this.red=t,this.green=z,this.blue=y}toString(){return`rgb(${this.red}, ${this.green}, ${this.blue})`}toInt(){return(this.red&255)<<16|(this.green&255)<<8|this.blue&255}static fromInt(t){return t=f(t,0,16777215),new M(t>>16&255,t>>8&255,t&255)}static fromHex(t){const z=t.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);if(!z)throw new Error(`Invalid hex color: ${t}`);return new M(parseInt(z[1],16),parseInt(z[2],16),parseInt(z[3],16))}static fromRGB(t,z,y){return t=f(t,0,255),z=f(z,0,255),y=f(y,0,255),new M(t,z,y)}static fromHSL(t,z,y){t=f(t,0,360),z=f(z,0,100),y=f(y,0,100),t/=360,z/=100,y/=100;let e,n,r;if(z===0)e=n=r=y;else{const i=(a,d,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<.16666666666666666?a+(d-a)*6*u:u<.5?d:u<.6666666666666666?a+(d-a)*(.6666666666666666-u)*6:a),h=y<.5?y*(1+z):y+z-y*z,c=2*y-h;e=i(c,h,t+1/3),n=i(c,h,t),r=i(c,h,t-1/3)}return new M(Math.round(e*255),Math.round(n*255),Math.round(r*255))}};const L={red:new o(255,0,0),green:new o(0,255,0),blue:new o(0,0,255),orange:new o(255,165,0),yellow:new o(255,255,0),purple:new o(128,0,128),pink:new o(255,20,147),white:new o(255,255,255),black:new o(0,0,0),gray:new o(128,128,128),brown:new o(165,42,42),cyan:new o(0,255,255),darkGreen:new o(0,128,0),darkBlue:new o(0,0,128),darkOrange:new o(255,140,0),darkYellow:new o(128,128,0),darkPurple:new o(75,0,130),darkPink:new o(255,105,180),darkGray:new o(64,64,64),darkBrown:new o(139,69,19),darkCyan:new o(0,128,128)};let I=class k{constructor(t,z){l(this,"location");l(this,"color");l(this,"update");this.location=t,this.color=z}toDto(){return{location:this.location.asTuple,color:this.color.toInt()}}static fromDto(t){return new k(T.fromTuple(t.location),o.fromInt(t.color))}};const C=180/Math.PI,D=Math.PI/180,w=Y(Array.from({length:256},(x,t)=>t));function b(x){return x*x*x*(x*(x*6-15)+10)}function g(x,t,z){const y=x&15,e=y<8?t:z,n=y<4?z:y===12||y===14?t:0;return(y&1?-e:e)+(y&2?-n:n)}function A(x,t){const z=Math.floor(x)&255,y=Math.floor(t)&255;x-=Math.floor(x),t-=Math.floor(t);const e=b(x),n=b(t),r=w[z]+y,i=w[z+1]+y;return m(m(g(w[r],x,t),g(w[i],x-1,t),e),m(g(w[r+1],x,t-1),g(w[i+1],x-1,t-1),e),n)}function B(x,t,z){return Math.min(Math.max(x,t),z)}function m(x,t,z){return x+(t-x)*z}function G(x,t,z){return x+O(t,x)*z}function O(x,t){return(t-x+180)%360-180}function P(x,t){return x+Math.random()*(t-x)}function p(x,t){return Math.floor(P(x,t))}function R(x){return x[p(0,x.length)]}function S(){return Math.random()<.5}function E(){return S()?1:-1}function Y(x){const t=x.slice();for(let z=t.length-1;z>0;z--){const y=p(0,z+1);[t[z],t[y]]=[t[y],t[z]]}return t}function V(x){for(let t=x.length-1;t>0;t--){const z=p(0,t+1);[x[t],x[z]]=[x[z],x[t]]}return x}const U=Object.freeze(Object.defineProperty({__proto__:null,DEG_TO_RAD:D,RAD_TO_DEG:C,angleDifference:O,clamp:B,lerp:m,lerpAngle:G,perlinNoise:A,random:P,randomBool:S,randomChoice:R,randomInt:p,randomSign:E,shuffle:Y,shuffleInPlace:V},Symbol.toStringTag,{value:"Module"}));function X(x){return new Promise(t=>setTimeout(t,x))}const q=Object.freeze(Object.defineProperty({__proto__:null,sleep:X},Symbol.toStringTag,{value:"Module"})),H=[{x:.5,y:.056,z:1},{x:.526,y:.042,z:.969},{x:.526,y:.042,z:.922},{x:.487,y:.097,z:.938},{x:.447,y:.097,z:.961},{x:.421,y:.222,z:.961},{x:.526,y:.153,z:.922},{x:.421,y:.139,z:.938},{x:.395,y:.181,z:.961},{x:.368,y:.222,z:.969},{x:.237,y:.25,z:.977},{x:.224,y:.319,z:1},{x:.184,y:.333,z:.977},{x:.158,y:.361,z:.93},{x:.158,y:.417,z:.969},{x:.132,y:.514,z:.953},{x:.197,y:.556,z:.984},{x:.145,y:.597,z:.961},{x:.132,y:.667,z:.946},{x:.145,y:.722,z:.938},{x:.184,y:.778,z:.938},{x:.211,y:.806,z:.961},{x:.316,y:.778,z:.969},{x:.368,y:.806,z:.961},{x:.434,y:.778,z:.922},{x:.487,y:.819,z:.953},{x:.566,y:.792,z:.953},{x:.658,y:.75,z:.969},{x:.684,y:.722,z:.969},{x:.711,y:.708,z:1},{x:.803,y:.681,z:1},{x:.855,y:.625,z:1},{x:.895,y:.583,z:.969},{x:1,y:.528,z:.938},{x:.987,y:.472,z:.984},{x:.895,y:.417,z:.984},{x:.868,y:.375,z:.969},{x:.921,y:.319,z:.922},{x:.895,y:.278,z:.899},{x:.803,y:.194,z:.876},{x:.789,y:.208,z:.899},{x:.684,y:.181,z:.891},{x:.671,y:.181,z:.876},{x:.605,y:.181,z:.868},{x:.566,y:.139,z:.891},{x:.5,y:.153,z:.907},{x:.434,y:.139,z:.907},{x:.342,y:.167,z:.915},{x:.303,y:.139,z:.899},{x:.237,y:.153,z:.868},{x:.145,y:.333,z:.822},{x:.145,y:.444,z:.814},{x:.105,y:.5,z:.798},{x:.118,y:.542,z:.822},{x:.197,y:.597,z:.798},{x:.224,y:.667,z:.822},{x:.237,y:.736,z:.837},{x:.276,y:.806,z:.837},{x:.303,y:.833,z:.86},{x:.368,y:.889,z:.86},{x:.421,y:.889,z:.86},{x:.513,y:.833,z:.853},{x:.579,y:.847,z:.845},{x:.658,y:.889,z:.837},{x:.697,y:.861,z:.822},{x:.816,y:.819,z:.822},{x:.842,y:.764,z:.845},{x:.816,y:.694,z:.876},{x:.789,y:.611,z:.868},{x:.868,y:.528,z:.884},{x:.921,y:.514,z:.845},{x:.947,y:.417,z:.86},{x:.882,y:.347,z:.868},{x:.816,y:.333,z:.86},{x:.789,y:.264,z:.845},{x:.724,y:.306,z:.829},{x:.684,y:.208,z:.806},{x:.579,y:.264,z:.806},{x:.513,y:.236,z:.798},{x:.447,y:.236,z:.767},{x:.382,y:.264,z:.775},{x:.342,y:.278,z:.767},{x:.303,y:.333,z:.775},{x:.289,y:.417,z:.775},{x:.289,y:.486,z:.775},{x:.25,y:.569,z:.767},{x:.263,y:.639,z:.767},{x:.263,y:.75,z:.767},{x:.289,y:.792,z:.767},{x:.368,y:.875,z:.744},{x:.395,y:.875,z:.775},{x:.474,y:.875,z:.791},{x:.539,y:.875,z:.814},{x:.605,y:.806,z:.791},{x:.697,y:.764,z:.744},{x:.763,y:.806,z:.744},{x:.724,y:.736,z:.752},{x:.763,y:.639,z:.76},{x:.737,y:.569,z:.736},{x:.487,y:.528,z:.775},{x:.605,y:.431,z:.798},{x:.618,y:.361,z:.829},{x:.579,y:.389,z:.829},{x:.487,y:.347,z:.845},{x:.447,y:.444,z:.845},{x:.408,y:.431,z:.876},{x:.421,y:.472,z:.876},{x:.368,y:.556,z:.891},{x:.382,y:.583,z:.876},{x:.461,y:.611,z:.853},{x:.487,y:.611,z:.853},{x:.526,y:.667,z:.837},{x:.618,y:.611,z:.86},{x:.632,y:.611,z:.868},{x:.671,y:.514,z:.876},{x:.684,y:.458,z:.899},{x:.763,y:.431,z:.899},{x:.803,y:.333,z:.907},{x:.789,y:.25,z:.891},{x:.842,y:.167,z:.899},{x:.789,y:.222,z:.938},{x:.711,y:.111,z:.93},{x:.408,y:.194,z:.938},{x:.632,y:.167,z:.93},{x:.605,y:.083,z:.946},{x:.526,y:.014,z:.961},{x:.434,y:0,z:.938},{x:.368,y:.042,z:.953},{x:.368,y:.139,z:.946},{x:.276,y:.167,z:.946},{x:.25,y:.222,z:.946},{x:.211,y:.25,z:.876},{x:.145,y:.222,z:.915},{x:.092,y:.194,z:.907},{x:.026,y:.278,z:.93},{x:.105,y:.347,z:.953},{x:.013,y:.389,z:.961},{x:.092,y:.5,z:.977},{x:.026,y:.583,z:.984},{x:0,y:.625,z:.953},{x:.026,y:.694,z:.953},{x:.053,y:.75,z:.961},{x:.105,y:.75,z:.977},{x:.211,y:.764,z:.977},{x:.237,y:.792,z:.969},{x:.355,y:.764,z:.961},{x:.118,y:.792,z:.946},{x:.474,y:.819,z:.907},{x:.447,y:.861,z:.876},{x:.5,y:.806,z:.837},{x:.579,y:.917,z:.798},{x:.658,y:.917,z:.775},{x:.684,y:.958,z:.806},{x:.724,y:.972,z:.86},{x:.658,y:.986,z:.884},{x:.605,y:.972,z:.884},{x:.513,y:1,z:.891},{x:.474,y:.917,z:.884},{x:.368,y:.931,z:.876},{x:.329,y:.875,z:.876},{x:.263,y:.931,z:.829},{x:.211,y:.903,z:.86},{x:.158,y:.833,z:.868},{x:.105,y:.75,z:.884},{x:.132,y:.653,z:.837},{x:.105,y:.625,z:.853},{x:.039,y:.569,z:.806},{x:.053,y:.528,z:.822},{x:.105,y:.458,z:.806},{x:.132,y:.375,z:.767},{x:.211,y:.333,z:.798},{x:.263,y:.319,z:.775},{x:.289,y:.25,z:.775},{x:.263,y:.403,z:.767},{x:.355,y:.167,z:.798},{x:.408,y:.125,z:.814},{x:.487,y:.125,z:.806},{x:.553,y:.069,z:.791},{x:.632,y:.083,z:.775},{x:.671,y:.069,z:.736},{x:.632,y:.194,z:.752},{x:.737,y:.208,z:.752},{x:.763,y:.25,z:.76},{x:.776,y:.319,z:.791},{x:.763,y:.361,z:.806},{x:.789,y:.444,z:.806},{x:.776,y:.5,z:.806},{x:.711,y:.583,z:.775},{x:.711,y:.611,z:.775},{x:.658,y:.708,z:.752},{x:.592,y:.75,z:.736},{x:.618,y:.708,z:.798},{x:.592,y:.722,z:.721},{x:.487,y:.736,z:.744},{x:.474,y:.708,z:.783},{x:.447,y:.639,z:.783},{x:.395,y:.625,z:.767},{x:.421,y:.583,z:.744},{x:.368,y:.611,z:.736},{x:.316,y:.569,z:.69},{x:.25,y:.653,z:.69},{x:.184,y:.667,z:.682},{x:.237,y:.681,z:.721},{x:.158,y:.722,z:.767},{x:.224,y:.764,z:.783},{x:.289,y:.764,z:.744},{x:.342,y:.778,z:.76},{x:.408,y:.736,z:.713},{x:.434,y:.806,z:.729},{x:.5,y:.875,z:.713},{x:.553,y:.875,z:.744},{x:.632,y:.847,z:.744},{x:.711,y:.806,z:.721},{x:.684,y:.806,z:.682},{x:.789,y:.792,z:.69},{x:.711,y:.694,z:.667},{x:.789,y:.708,z:.721},{x:.763,y:.639,z:.713},{x:.868,y:.583,z:.721},{x:.855,y:.458,z:.698},{x:.855,y:.472,z:.698},{x:.842,y:.403,z:.674},{x:.776,y:.333,z:.682},{x:.737,y:.25,z:.682},{x:.434,y:.264,z:.705},{x:.658,y:.222,z:.674},{x:.553,y:.222,z:.69},{x:.526,y:.181,z:.659},{x:.434,y:.111,z:.667},{x:.368,y:.167,z:.674},{x:.316,y:.222,z:.651},{x:.316,y:.278,z:.674},{x:.263,y:.292,z:.674},{x:.25,y:.361,z:.667},{x:.211,y:.458,z:.612},{x:.237,y:.514,z:.667},{x:.237,y:.542,z:.667},{x:.263,y:.653,z:.667},{x:.224,y:.694,z:.659},{x:.289,y:.764,z:.628},{x:.276,y:.847,z:.643},{x:.355,y:.819,z:.659},{x:.408,y:.903,z:.667},{x:.474,y:.889,z:.69},{x:.553,y:.861,z:.69},{x:.605,y:.903,z:.682},{x:.671,y:.847,z:.674},{x:.737,y:.889,z:.643},{x:.763,y:.806,z:.659},{x:.763,y:.75,z:.674},{x:.842,y:.611,z:.628},{x:.816,y:.5,z:.589},{x:.895,y:.5,z:.581},{x:.592,y:.444,z:.636},{x:.816,y:.417,z:.659},{x:.737,y:.347,z:.667},{x:.658,y:.278,z:.628},{x:.658,y:.25,z:.605},{x:.592,y:.222,z:.612},{x:.553,y:.278,z:.659},{x:.539,y:.278,z:.659},{x:.461,y:.278,z:.651},{x:.434,y:.292,z:.566},{x:.382,y:.292,z:.651},{x:.342,y:.333,z:.667},{x:.303,y:.431,z:.651},{x:.224,y:.389,z:.62},{x:.289,y:.431,z:.62},{x:.211,y:.528,z:.643},{x:.316,y:.611,z:.674},{x:.342,y:.667,z:.651},{x:.355,y:.653,z:.643},{x:.395,y:.667,z:.589},{x:.395,y:.653,z:.574},{x:.474,y:.639,z:.581},{x:.461,y:.583,z:.597},{x:.566,y:.569,z:.581},{x:.513,y:.458,z:.597},{x:.447,y:.486,z:.589},{x:.421,y:.417,z:.574},{x:.368,y:.375,z:.504},{x:.316,y:.306,z:.504},{x:.303,y:.403,z:.519},{x:.289,y:.486,z:.488},{x:.316,y:.5,z:.543},{x:.421,y:.611,z:.55},{x:.447,y:.667,z:.55},{x:.5,y:.625,z:.55},{x:.5,y:.556,z:.543},{x:.566,y:.556,z:.527},{x:.513,y:.5,z:.519},{x:.553,y:.389,z:.488},{x:.487,y:.306,z:.473},{x:.447,y:.236,z:.457},{x:.434,y:.292,z:.496},{x:.368,y:.306,z:.504},{x:.342,y:.361,z:.504},{x:.289,y:.403,z:.473},{x:.303,y:.458,z:.519},{x:.303,y:.542,z:.504},{x:.395,y:.694,z:.481},{x:.368,y:.75,z:.488},{x:.447,y:.75,z:.496},{x:.474,y:.833,z:.488},{x:.553,y:.792,z:.488},{x:.605,y:.833,z:.481},{x:.658,y:.764,z:.442},{x:.737,y:.708,z:.465},{x:.737,y:.639,z:.481},{x:.737,y:.597,z:.488},{x:.711,y:.542,z:.504},{x:.789,y:.472,z:.512},{x:.789,y:.375,z:.519},{x:.737,y:.306,z:.519},{x:.658,y:.306,z:.504},{x:.605,y:.347,z:.481},{x:.579,y:.361,z:.473},{x:.487,y:.306,z:.45},{x:.447,y:.333,z:.457},{x:.368,y:.375,z:.481},{x:.316,y:.403,z:.465},{x:.526,y:.361,z:.473},{x:.237,y:.444,z:.473},{x:.263,y:.514,z:.473},{x:.316,y:.569,z:.473},{x:.368,y:.569,z:.45},{x:.447,y:.694,z:.457},{x:.474,y:.708,z:.45},{x:.553,y:.708,z:.442},{x:.684,y:.694,z:.442},{x:.684,y:.708,z:.457},{x:.763,y:.611,z:.45},{x:.684,y:.597,z:.481},{x:.737,y:.528,z:.488},{x:.711,y:.5,z:.442},{x:.697,y:.417,z:.411},{x:.632,y:.431,z:.419},{x:.566,y:.389,z:.488},{x:.553,y:.389,z:.496},{x:.579,y:.417,z:.465},{x:.618,y:.528,z:.457},{x:.579,y:.611,z:.496},{x:.605,y:.556,z:.55},{x:.632,y:.639,z:.589},{x:.632,y:.708,z:.589},{x:.711,y:.792,z:.566},{x:.711,y:.75,z:.574},{x:.737,y:.861,z:.597},{x:.737,y:.833,z:.628},{x:.684,y:.847,z:.628},{x:.447,y:.833,z:.628},{x:.368,y:.806,z:.612},{x:.342,y:.806,z:.612},{x:.263,y:.708,z:.628},{x:.289,y:.653,z:.643},{x:.211,y:.611,z:.651},{x:.184,y:.556,z:.636},{x:.132,y:.472,z:.628},{x:.158,y:.361,z:.628},{x:.145,y:.361,z:.659},{x:.171,y:.278,z:.667},{x:.237,y:.25,z:.659},{x:.211,y:.153,z:.659},{x:.276,y:.208,z:.628},{x:.368,y:.111,z:.62},{x:.382,y:.125,z:.581},{x:.408,y:.111,z:.612},{x:.5,y:.167,z:.597},{x:.553,y:.125,z:.597},{x:.645,y:.139,z:.581},{x:.697,y:.194,z:.566},{x:.711,y:.292,z:.581},{x:.776,y:.333,z:.558},{x:.737,y:.375,z:.519},{x:.737,y:.417,z:.543},{x:.829,y:.486,z:.543},{x:.75,y:.528,z:.55},{x:.789,y:.653,z:.566},{x:.763,y:.667,z:.566},{x:.737,y:.764,z:.566},{x:.684,y:.806,z:.566},{x:.632,y:.819,z:.574},{x:.605,y:.889,z:.543},{x:.526,y:.792,z:.55},{x:.474,y:.792,z:.566},{x:.368,y:.75,z:.566},{x:.316,y:.75,z:.558},{x:.25,y:.722,z:.535},{x:.263,y:.625,z:.558},{x:.263,y:.569,z:.566},{x:.197,y:.5,z:.566},{x:.211,y:.486,z:.55},{x:.237,y:.375,z:.535},{x:.25,y:.306,z:.535},{x:.303,y:.278,z:.527},{x:.316,y:.25,z:.457},{x:.368,y:.208,z:.488},{x:.395,y:.167,z:.434},{x:.474,y:.181,z:.457},{x:.526,y:.222,z:.434},{x:.645,y:.333,z:.403},{x:.697,y:.347,z:.357},{x:.684,y:.444,z:.364},{x:.816,y:.528,z:.349},{x:.842,y:.556,z:.349},{x:.763,y:.583,z:.372},{x:.711,y:.694,z:.38},{x:.592,y:.722,z:.38},{x:.592,y:.778,z:.38},{x:.526,y:.792,z:.38},{x:.461,y:.736,z:.364},{x:.368,y:.694,z:.357},{x:.355,y:.611,z:.372},{x:.237,y:.597,z:.341},{x:.276,y:.5,z:.349},{x:.158,y:.208,z:.333},{x:.105,y:.431,z:.318},{x:.211,y:.333,z:.302},{x:.355,y:.069,z:.333},{x:.342,y:.264,z:.318},{x:.395,y:.236,z:.333},{x:.5,y:.264,z:.302},{x:.566,y:.25,z:.349},{x:.605,y:.306,z:.302},{x:.618,y:.333,z:.318},{x:.684,y:.389,z:.318},{x:.737,y:.472,z:.31},{x:.671,y:.486,z:.302},{x:.737,y:.542,z:.287},{x:.592,y:.625,z:.302},{x:.579,y:.667,z:.302},{x:.605,y:.75,z:.271},{x:.5,y:.667,z:.287},{x:.434,y:.667,z:.295},{x:.316,y:.667,z:.271},{x:.289,y:.611,z:.287},{x:.237,y:.569,z:.264},{x:.263,y:.514,z:.279},{x:.237,y:.403,z:.264},{x:.408,y:.361,z:.264},{x:.382,y:.319,z:.248},{x:.5,y:.264,z:.24},{x:.553,y:.278,z:.225},{x:.592,y:.361,z:.233},{x:.697,y:.375,z:.217},{x:.724,y:.472,z:.217},{x:.737,y:.583,z:.217},{x:.697,y:.653,z:.209},{x:.697,y:.653,z:.209},{x:.632,y:.736,z:.194},{x:.395,y:.736,z:.178},{x:.408,y:.611,z:.186},{x:.289,y:.583,z:.194},{x:.303,y:.5,z:.194},{x:.303,y:.5,z:.194},{x:.263,y:.361,z:.194},{x:.368,y:.333,z:.186},{x:.434,y:.333,z:.202},{x:.539,y:.333,z:.194},{x:.5,y:.278,z:.178},{x:.605,y:.194,z:.163},{x:.645,y:.194,z:.155},{x:.684,y:.389,z:.155},{x:.684,y:.458,z:.163},{x:.684,y:.556,z:.155},{x:.671,y:.639,z:.147},{x:.579,y:.694,z:.147},{x:.539,y:.75,z:.132},{x:.487,y:.75,z:.14},{x:.461,y:.611,z:.14},{x:.395,y:.639,z:.124},{x:.342,y:.5,z:.101},{x:.329,y:.486,z:.085},{x:.316,y:.444,z:.116},{x:.276,y:.417,z:.132},{x:.395,y:.333,z:.163},{x:.434,y:.306,z:.163},{x:.5,y:.25,z:.124},{x:.579,y:.25,z:.116},{x:.618,y:.361,z:.116},{x:.658,y:.417,z:.07},{x:.618,y:.486,z:.054},{x:.632,y:.528,z:.093},{x:.645,y:.639,z:.078},{x:.5,y:.667,z:.07},{x:.526,y:.778,z:.054},{x:.447,y:.722,z:.039},{x:.368,y:.556,z:.039},{x:.316,y:.556,z:.054},{x:.263,y:.778,z:.054},{x:.276,y:.444,z:.054},{x:.395,y:.333,z:.039},{x:.461,y:.292,z:.023},{x:.513,y:.306,z:.016},{x:.618,y:.472,z:.008},{x:.645,y:.5,z:.039},{x:.592,y:.556,z:.039},{x:.579,y:.611,z:.016},{x:.553,y:.625,z:.008},{x:.447,y:.611,z:0}];class N{constructor(){l(this,"setup");l(this,"update");l(this,"lights",H.map(t=>new I(T.fromObject(t),new o(0,0,0))));l(this,"time",null);l(this,"iteration",0);l(this,"running",!1)}async run(){var t,z;for((!this.running||this.time===null)&&(this.time=0,this.running=!0,(t=this.setup)==null||t.call(this));this.running;){const y=1e3/this.fps;this.iteration++,this.time+=y,(z=this.update)==null||z.call(this,this.time,y,this.iteration),this.lightUpdate(this.time,y,this.iteration),this.draw(),await X(y)}}reset(){this.iteration=0,this.time=null;for(const t of this.lights)t.color=new o(0,0,0);this.draw()}pause(){this.running=!1}play(){this.running=!0,this.run()}step(){this.running=!0,this.run(),this.running=!1}lightUpdate(t,z,y){var e;for(const n of this.lights){const r=(e=n.update)==null?void 0:e.call(n,t,z,y);r&&(n.color=r)}}}class F extends N{constructor(){super(...arguments);l(this,"fps",30)}draw(){postMessage({type:"update",lights:this.lights.map(z=>z.toDto())})}}const J=new F,K=T,Q=o,W=L,v=I;exports.Color=Q;exports.Light=v;exports.MathUtils=U;exports.Time=q;exports.Vector3=K;exports.colors=W;exports.runner=J;
